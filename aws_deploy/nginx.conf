server {
        listen 80 default_server;
        listen [::]:80 default_server;
        root /var/www/html;
        server_name  justforfunstuff.com;

        add_header 'Access-Control-Allow-Origin' 'https://justforfunstuff.com' always;
        add_header 'Access-Control-Allow-Credentials' 'true' always;
        add_header 'Access-Control-Allow-Methods' 'GET, OPTIONS' always;
        add_header 'Access-Control-Allow-Headers' 'Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Requested-With' always;

		location / {
		   proxy_pass http://localhost:3000; # Assuming your React app is running on port 3000
		   proxy_http_version 1.1;
		   proxy_set_header Upgrade $http_upgrade;
		   proxy_set_header Connection ‘upgrade’;
		   proxy_set_header Host $host;
		   proxy_cache_bypass $http_upgrade;
		}

		location /api/ {
           proxy_pass http://localhost:8080/api/; # Assuming your React app is running on port 3000
           proxy_http_version 1.1;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection ‘upgrade’;
           proxy_set_header Host $host;
           proxy_cache_bypass $http_upgrade;
        }

		listen 443 ssl;

		# RSA Certificate
		ssl_certificate /etc/letsencrypt/live/justforfunstuff.com/fullchain.pem; # managed by Certbot
    	ssl_certificate_key /etc/letsencrypt/live/justforfunstuff.com/privkey.pem; # managed by Certbot

    	include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot

    	# Redirect non-https traffic to https
	    if ($scheme != "https") {
	        return 301 https://$host$request_uri;
	    } # managed by Certbot
}